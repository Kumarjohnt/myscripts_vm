#NameVirtualHost

#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#  THIS FILE IS CLOSED FOR ADDING MORE VIRTUAL HOSTS
#
#  PLEASE DO NOT ADD ANY VIRTUAL HOST WITHOUT CHECKING WITH
#  PENG,GANG  gpeng@vmware.com
#
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/vmstore
    ServerName vmstore.vmware.com
    RewriteEngine on


    # Access log shows Digital River regularly post data here
    ErrorLog /www/logs/vmstore-error_log
    CustomLog /www/logs/vmstore-access_log xcombined
    #RewriteRule     ^.*$  http://www.vmware.com/webmaint/temp_maintenance.html [R,L]
    RewriteRule     ^/(vmdrws/.*)$          http://drprodwebsvc-vip.vmware.com:7001/$1  [P,L]
</VirtualHost>



<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName support.vmware.com
    ServerAlias support
    RewriteEngine on

    ErrorLog /www/logs/support-error_log
    CustomLog /www/logs/support-access_log xcombined
    #<DTA> support.vmware.com is front ended by Akamai, and Akamai is caching redirect responses.  If you make a change to the redirects, be sure to flush the Akamai cache for the redirect you changed.
    # Uncomment the following two lines for 8-20-2009 deployment @6pm
    RewriteCond %{REQUEST_URI} !/selfsupport.*$
    Rewriterule ^.*$ http://www.vmware.com/support/ [R=301,L]
    RewriteRule ^/selfsupport/s3portal.portal(.*)$  http://www.vmware.com/mysupport/getSubscribedProduct.portal$1 [R=301,L]
    RewriteRule ^/selfsupport/?$  https://my.vmware.com/group/vmware/get-help  [R=301,L]
        RewriteRule ^/selfsupport/(.*)$  http://www.vmware.com/mysupport/$1 [R=301,L]
    RewriteRule ^.*$ http://www.vmware.com/support [R=301,L]
</VirtualHost>



<VirtualHost *:80>
        ServerName downloads.vmware.com
        ServerAlias downloads

        ErrorLog /etc/httpd/logs/downloads-error_log
        CustomLog /etc/httpd/logs/downloads-access_log xcombined

        RewriteEngine On

        #HZ 558093
        RewriteRule ^/gsa$                    /gsa/     [R]
        RewriteRule ^/gsa/(.*)$               http://search.vmware.com/$1 [QSA,L,P]

        RewriteRule ^/(cn|jp|de|fr|kr)/d/info/?(.*)        http://my.vmware.com/$1/web/vmware/info/slug/$2 [R=301,L]
        RewriteRule ^/d/info/?(.*)                         http://my.vmware.com/web/vmware/info/slug/$1 [R=301,L]

        RewriteRule ^/(cn|jp|de|fr|kr)/d/details/?(.*)     http://my.vmware.com/$1/web/vmware/details/$2 [R=301,L]
        RewriteRule ^/d/details/?(.*)                      http://my.vmware.com/web/vmware/details/$1 [R=301,L]

        RewriteRule ^/(cn|jp|de|fr|kr)/d/search/?(.*)      http://my.vmware.com/$1/web/vmware/searchresults/$2 [R=301,L]
        RewriteRule ^/d/search/?(.*)                       http://my.vmware.com/web/vmware/searchresults/$1 [R=301,L]

        RewriteRule ^/(cn|jp|de|fr|kr)/d/?(.*)             http://my.vmware.com/$1/web/vmware/downloads [R=301,L]
        RewriteRule ^/(d/?.*)$                             http://my.vmware.com/web/vmware/downloads [R=301,L]
        RewriteRule ^(.*)$                                 http://my.vmware.com/web/vmware/downloads [R=301,L]
</VirtualHost>



<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName load-balancer-monitor
    KeepAlive Off
    RewriteEngine On

    RewriteCond %{REMOTE_ADDR} !^10\.113\.78\.120$
    RewriteRule ^/load-balancer-monitor/ruok.html$   /etc/httpd/conf/load-balancer-monitor/ruok.html  [L]

    ErrorLog /www/logs/load-balancer-monitor-error_log
    CustomLog /www/logs/load-balancer-monitor-access_log xcombined
</VirtualHost>

# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#  For server status
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
#    ServerName web-prod-1-new
    ServerName web-prod-1
#    ServerAlias web-prod-2-new web-prod-3-new web-prod-4-new
    ServerAlias web-prod-2 web-prod-3 web-prod-4
#    ServerAlias web-prod-1-new.vmware.com web-prod-2-new.vmware.com web-prod-3-new.vmware.com web-prod-4-new.vmware.com
    ServerAlias web-prod-1.vmware.com web-prod-2.vmware.com web-prod-3.vmware.com web-prod-4.vmware.com 

<Location /server-status>
    SetHandler server-status

    <RequireAll>
       Require all granted
       # Not allow external access through F5
       Require not ip 10.113.78.120
    </RequireAll>
</Location>

<Location /server-info>
    SetHandler server-info
    <RequireAll>
       Require all granted
       # Not allow external access through F5
       Require not ip 10.113.78.120
    </RequireAll>
</Location>

    ErrorLog /www/logs/server-status-error_log
    CustomLog /www/logs/server-status-access_log xcombined
</VirtualHost>


# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# Virtual host for my.vmware.com                       
# There is no change as part of domain change         
# As redirect from my.vmware.com to customerconnect.vmware.com
# will be configured at H1/H2 Servers
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName  my.vmware.com
    ServerAlias my-akorig.vmware.com
    KeepAlive on
    SSLProxyEngine on

    <FilesMatch "\.inc$">
        Require all denied
    </FilesMatch>


    # Turn off Etag
    <LocationMatch "/(files|static|vmf|static_search)">
        Options -Indexes
        Header unset Etag
        FileEtag none
    </LocationMatch>

    # Cache media files for 10 min
    <FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache image files for 10 min
    <FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache commonly updated files for 10 min
    <FilesMatch "\.(xml|txt|html|js|css)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache fonts for 1 year plus 1 second
    <LocationMatch "/files/fonts/framework" >
        Header unset Etag
        FileEtag none
        Header set Cache-Control "max-age=31536001, public, must-revalidate"
    </LocationMatch>


    RewriteEngine on

    # Protect CDN Origin - Make Sure this is placed before other rewrite rules
    # Not turned on yet, only add node ID to prepare 10/19/2018
    Include conf-LOCAL/ADD-NODE-ID.conf
    Include conf/BLOCK-EXTERNAL-DIRECT-ORIGIN-ACCESS.conf
    Include conf/BLOCK-BOT.conf

    ErrorLog /var/log/httpd/my-error_log
    CustomLog /var/log/httpd/my_log xcombined

    #RFC 127961
    RewriteRule ^/c/portal/rest_proxy.*$   - [F,NC,L]

    RewriteCond %{REMOTE_ADDR} ^10\.113\.78\.120$
    RewriteCond %{REQUEST_URI} ^/group/control_panel($|/.*$)  [NC]
    RewriteRule .* - [F,L]

    RewriteRule ^/akamai-probe.html$   /etc/httpd/conf/akamai-probe/akamai-probe.html [L]
   # RewriteRule ^/ /www/wwwroot-new/wwwroot/webmaint/maintenance.html [L]
    Include conf/conf.d/maint_myvmware.conf
    Include conf/conf.d/my-iamrules.conf

        #7/15/2016 Zeus Launch
        Include conf/conf.d/static_assets.conf

        # scraper.conf handles /app/template
    Include conf/conf.d/scraper.conf
    Include conf/conf.d/redirects.myvmware.conf

    Header append X-Frame-Options SAMEORIGIN
        <LocationMatch "/group/vmware/alogin" >
         Header unset X-Frame-Options
        </LocationMatch>

     <LocationMatch "/web/vmware/holoverlay" >
        Header unset X-Frame-Options
        Header unset X-Content-Type-Options
    </LocationMatch>

        <LocationMatch "/web/vmware/innercircleloginoverlay" >
        Header unset X-Frame-Options
    </LocationMatch>

    <LocationMatch "/web/vmware/" >
          Header unset X-Content-Type-Options
     </LocationMatch>

    <LocationMatch "/group/vmware/evalcenter" >
        Header unset X-Frame-Options
        Header unset X-Content-Type-Options
     </LocationMatch>

#### Rules added for KB SSO with My VMware ########

    <LocationMatch "/en/web/vmware/login" >
                        SetEnvIf Origin "http(s)?://(kb.vmware.com|ikb.vmware.com)$" AccessControlAllowOrigin=$0
                        Header add Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
                        Header set Access-Control-Allow-Credentials "true"
                        Header set Access-Control-Max-Age "1000"
                        Header set Access-Control-Allow-Headers "X-Requested-With, Content-Type, Origin, Authorization, Accept, Client-Security-Token, Accept-Encoding"
                        Header set Access-Control-Allow-Methods "GET"
     </LocationMatch>

#### Additional rules required for CSP ########

<LocationMatch "/web/csp/payment" >
Header unset X-Frame-Options
</LocationMatch>

<LocationMatch "/web/csp/addEditCard" >
Header unset X-Frame-Options
</LocationMatch>

###### END #########################

# CSP Change 1.

<LocationMatch "/oam/server/authentication">
        SetEnvIf Cookie "OAM_GITO=(.*)" HAVE_OAM_GITO_Cookie=1
        Header add Set-Cookie "OAM_GITO=; Domain=.vmware.com; Expires=Wed, 11 Oct 2017 02:19:47 GMT; Max-Age=-1; Path=/" env=HAVE_OAM_GITO_Cookie
</LocationMatch>


# CSP Change 2.

          Header set DC-Instance "SC9-prod"
          Header set Access-Control-Expose-Headers DC-Instance


  ProxyErrorOverride On

  ErrorDocument 500 https://www.vmware.com/site_maintenance.html
  ErrorDocument 502 https://www.vmware.com/site_maintenance.html
  ErrorDocument 503 https://www.vmware.com/site_maintenance.html
  ErrorDocument 504 https://www.vmware.com/site_maintenance.html

  ErrorDocument 404 https://www.vmware.com/page-not-found.html


################Below line added for domain seggregation auth.vmware.com
  RewriteRule ^/oam/(.*)$ https://auth.vmware.com/oam/$1 [R=307,L]
#  #########################################################################

    RewriteRule ^/(.*)$ http://my.vmware.com/$1 [P,L]
    ProxyPassReverse / http://my.vmware.com/


</VirtualHost>


# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
# New Virtual Host for Customer Connect 
# It is exact replica of MyVMware. Only two new files
# customerconnect.redirects.conf and redirects.iamrules.conf has 
# been used instead of MyVMware redirect files.
# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName  customerconnect.vmware.com
    ServerAlias customerconnect-akorig.vmware.com
    KeepAlive on
    SSLProxyEngine on

    <FilesMatch "\.inc$">
        Require all denied
    </FilesMatch>

    # Turn off Etag
    <LocationMatch "/(files|static|vmf|static_search)">
        Options -Indexes
        Header unset Etag
        FileEtag none
    </LocationMatch>

    # Caching media files for 1 day
    <FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=86400, public, must-revalidate"
    </FilesMatch>

    # Caching image files for 1 day
    <FilesMatch "\.(gif|jpg|jpeg|png|swf|svg)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=86400, public, must-revalidate"
    </FilesMatch>

    # Cache commonly updated files for 30 min
    <FilesMatch "\.(xml|txt|html|js|css)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=1800, public, must-revalidate"
    </FilesMatch>

    # Cache versioned files for 365 days
    <FilesMatch "^[\w]+\.[a-fA-F0-9]{20}\.(js|css)$">
        Header unset Cache-Control
        Header append Cache-Control "max-age=31536001, public, must-revalidate"
    </FilesMatch>

    # Caching locale files for 1 day
    <LocationMatch "/i18n" >
        Header unset Etag
        FileEtag none
        Header set Cache-Control "max-age=86400, public, must-revalidate"
    </LocationMatch>

    # Cache fonts for 1 year plus 1 second
    <LocationMatch "/files/fonts/framework" >
        Header unset Etag
        FileEtag none
        Header set Cache-Control "max-age=31536001, public, must-revalidate"
    </LocationMatch>

    RewriteEngine on

    # Protect CDN Origin - Make Sure this is placed before other rewrite rules
    # Not turned on yet, only add node ID to prepare 10/19/2018
    Include conf-LOCAL/ADD-NODE-ID.conf
    Include conf/BLOCK-EXTERNAL-DIRECT-ORIGIN-ACCESS.conf
    Include conf/BLOCK-BOT.conf

    ErrorLog /var/log/httpd/customerconnect-error_log
    CustomLog /var/log/httpd/customerconnect_log xcombined

    #RFC 127961
    RewriteRule ^/c/portal/rest_proxy.*$   - [F,NC,L]

    RewriteCond %{REMOTE_ADDR} ^10\.113\.78\.120$
    RewriteCond %{REQUEST_URI} ^/group/control_panel($|/.*$)  [NC]
    RewriteRule .* - [F,L]

    RewriteRule ^/akamai-probe.html$   /etc/httpd/conf/akamai-probe/akamai-probe.html [L]
    # RewriteRule ^/ /www/wwwroot-new/wwwroot/webmaint/maintenance.html [L]
    Include conf/conf.d/maint_myvmware.conf
    
    # New iamrules file for customerconnect.vmware.com
    # Include conf/conf.d/my-iamrules.conf
    Include conf/conf.d/customerconnect.iamrules.conf 

    #7/15/2016 Zeus Launch
    Include conf/conf.d/static_assets.conf

    # scraper.conf handles /app/template
    Include conf/conf.d/scraper.conf
    
    # New redirect file for customerconnect.vmware.com
    # Include conf/conf.d/redirects.myvmware.conf
    Include conf/conf.d/customerconnect.redirects.conf

    Header append X-Frame-Options SAMEORIGIN
        <LocationMatch "/group/vmware/alogin" >
         Header unset X-Frame-Options
        </LocationMatch>

     <LocationMatch "/web/vmware/holoverlay" >
        Header unset X-Frame-Options
        Header unset X-Content-Type-Options
    </LocationMatch>

        <LocationMatch "/web/vmware/innercircleloginoverlay" >
        Header unset X-Frame-Options
    </LocationMatch>

    <LocationMatch "/web/vmware/" >
          Header unset X-Content-Type-Options
     </LocationMatch>

    <LocationMatch "/group/vmware/evalcenter" >
        Header unset X-Frame-Options
        Header unset X-Content-Type-Options
     </LocationMatch>

    #### Rules added for KB SSO with My VMware ########

    <LocationMatch "/en/web/vmware/login" >
                        SetEnvIf Origin "http(s)?://(kb.vmware.com|ikb.vmware.com)$" AccessControlAllowOrigin=$0
                        Header add Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
                        Header set Access-Control-Allow-Credentials "true"
                        Header set Access-Control-Max-Age "1000"
                        Header set Access-Control-Allow-Headers "X-Requested-With, Content-Type, Origin, Authorization, Accept, Client-Security-Token, Accept-Encoding"
                        Header set Access-Control-Allow-Methods "GET"
    </LocationMatch>

    #### Additional rules required for CSP ########

    <LocationMatch "/web/csp/payment" >
        Header unset X-Frame-Options
    </LocationMatch>

    <LocationMatch "/web/csp/addEditCard" >
        Header unset X-Frame-Options
    </LocationMatch>

    ###### END #########################

    # CSP Change 1.

    <LocationMatch "/oam/server/authentication">
        SetEnvIf Cookie "OAM_GITO=(.*)" HAVE_OAM_GITO_Cookie=1
        Header add Set-Cookie "OAM_GITO=; Domain=.vmware.com; Expires=Wed, 11 Oct 2017 02:19:47 GMT; Max-Age=-1; Path=/" env=HAVE_OAM_GITO_Cookie
    </LocationMatch>


    # CSP Change 2.

    Header set DC-Instance "SC9-prod"
    Header set Access-Control-Expose-Headers DC-Instance


    ProxyErrorOverride On

    ErrorDocument 500 https://www.vmware.com/site_maintenance.html
    ErrorDocument 502 https://www.vmware.com/site_maintenance.html
    ErrorDocument 503 https://www.vmware.com/site_maintenance.html
    ErrorDocument 504 https://www.vmware.com/site_maintenance.html

    ErrorDocument 404 https://www.vmware.com/page-not-found.html


    ProxyPreserveHost on
    ################Below line added for domain seggregation auth.vmware.com
    RewriteRule ^/oam/(.*)$ https://auth.vmware.com/oam/$1 [R=307,L]
    ##########################################################################

    RewriteRule ^/(.*)$ http://web-prod-wg-sso-vip.vmware.com/$1 [P,L]
    ProxyPassReverse / http://customerconnect.vmware.com/

</VirtualHost>

#######################################################
#
# VMware Store Digital River Upgrade Portal
#
######################################################
<VirtualHost *:80>
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName  upgrade.vmware.com
    ServerAlias upgrade-akorig.vmware.com
    KeepAlive On
    RewriteEngine On
    #RewriteRule ^.*$         https://www.vmware.com/site_maintenance.html  [R,L]

    # Protect CDN Origin - Make Sure this is placed before other rewrite rules
    Include conf-LOCAL/ADD-NODE-ID.conf
    Include conf/BLOCK-EXTERNAL-DIRECT-ORIGIN-ACCESS.conf

    # Turn off Etag
    <LocationMatch "/(files|static|vmf|static_search)">
        Options -Indexes
        Header unset Etag
        FileEtag none
    </LocationMatch>

    # Cache media files for 10 min
    <FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache image files for 10 min
    <FilesMatch "\.(gif|jpg|jpeg|png|swf)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache commonly updated files for 10 min
    <FilesMatch "\.(xml|txt|html|js|css)$">
        Header unset Etag
        FileEtag none
        Header append Cache-Control "max-age=600, public, must-revalidate"
    </FilesMatch>

    # Cache fonts for 1 year plus 1 second
    <LocationMatch "/files/fonts/framework" >
        Header unset Etag
        FileEtag none
        Header set Cache-Control "max-age=31536001, public, must-revalidate"
    </LocationMatch>


    RewriteRule ^/akamai-probe.html$   /etc/httpd/conf/akamai-probe/akamai-probe.html [L]

    # redirects.webgate.conf handles URI /drupgsns and /account
    Include conf/conf.d/redirects.webgate.conf

        # static assets which are moved to AEM  7/15/2016 Zeus launch
        Include conf/conf.d/static_assets.conf

    # scraper.conf hands /app/template
    Include conf/conf.d/scraper.conf

        #7/15/2016 Zeus launch
    # Directly handle static content for /files
    #RewriteRule ^/files/(.*)$              /www/assets/files/$1 [L]


    # WWWA related proxypass rules from redirects.conf
    # Handles URI /a/customers/ /a/* /(cn|jp|de...)/customer/

        #7/15/2016 Zeus Launch
        #==================Rewrite rules for AEM forwards=====================================
        RewriteRule ^/content/dam/(.*)$                     http://www-cms-prod.vmware.com/content/dam/$1 [L,P]
        RewriteRule ^/bin/vmware/template/(.*)$             http://www-cms-prod.vmware.com/bin/vmware/template/$1 [L,P]
        RewriteRule ^/etc/clientlibs/vmwaredevapp/(.*)$     http://www-cms-prod.vmware.com/etc/clientlibs/vmwaredevapp/$1 [L,P]


    RewriteCond %{REQUEST_URI} !^/a/(beta|academic).*$
    RewriteRule      ^/a/(.*)$                     http://wwwa.vmware.com/$1 [L,P]
    ProxyPassReverse  /a/                          http://wwwa.vmware.com/

    RewriteRule ^/customers/a/(.*)$               http://wwwa.vmware.com/customers/$1 [L,P]
    RewriteRule ^/([a-z][a-z])/customers/a/(.*)$  http://wwwa.vmware.com/customers/$1/$2 [L,P]


    # Redirect everything else to www.vmware.com, this prevent content of
    # www.vmware.com to be seen on upgrade.vmware.com
    RewriteRule ^(.*)$                     http://www.vmware.com$1 [R=301,L]

    ErrorLog  /www/logs/upgrade-error_log
    CustomLog /www/logs/upgrade-access_log xcombined
</VirtualHost>

<VirtualHost *:80>
    ############# Virtual host for pubs.vmware.com (will be transited to docs.vmware.com) ##############
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName pubs.vmware.com
    KeepAlive On
    SSLProxyEngine on


    ProxyPreserveHost On

    ErrorLog logs/pubs-error_log
    CustomLog logs/pubs-access_log xcombined

    RewriteEngine on

    # Protect CDN Origin - Make Sure this is placed before other rewrite rules
    Include conf-LOCAL/ADD-NODE-ID.conf
    Include conf/BLOCK-EXTERNAL-DIRECT-ORIGIN-ACCESS.conf

    #LogLevel alert rewrite:trace6

    Include conf/conf.d/pubsredirects.conf
#    Include conf/conf.d/pubsrespecific.conf

</VirtualHost>

<VirtualHost *:80>
    ############# Virtual host for Info Center (CDF project) ##############
    DocumentRoot /www/wwwroot-new/wwwroot
    ServerName docs.vmware.com
    KeepAlive On

#    ProxyPreserveHost On

    ErrorLog logs/docs-error_log
    CustomLog logs/docs-access_log xcombined

    RewriteEngine on

    # Protect CDN Origin - Make Sure this is placed before other rewrite rules
    Include conf-LOCAL/ADD-NODE-ID.conf
    Include conf/BLOCK-EXTERNAL-DIRECT-ORIGIN-ACCESS.conf

#    RewriteCond %{REMOTE_ADDR} ^10\.113\.78\.120$
#    RewriteRule ^(.*)$          https://maintenance.vmware.com/vmw_maint/docs_maintenance.html  [R,L]

    RewriteMap pubsmap "txt:/etc/httpd/conf/conf.d/pubsmap.conf"
  
    ## Adding below as per ITCM-65229
    Include conf/conf.d/docs_EUC_redirects.conf

    Include conf/conf.d/docs_redirects.conf

    
<LocationMatch "/search/advanced-search" >
  ##SetEnvIf Origin "^http(s)?://(.+\.)?(vmware)\.(?:com)$" AccessControlAllowOrigin=$0
  Header  set Access-Control-Allow-Origin "*"
  Header  set Access-Control-Allow-Credentials "true"
  Header set Access-Control-Max-Age "1000"
  Header set Access-Control-Allow-Headers "X-Requested-With, Content-Type, Origin, Authorization, Accept, Client-Security-Token, Accept-Encoding"
  Header set Access-Control-Allow-Methods "POST"
</LocationMatch>

<LocationMatch "/api/search/v[0-9]+/advanced-search" >
  ###SetEnvIf Origin "^http(s)?://(.+\.)?(vmware)\.(?:com)$" AccessControlAllowOrigin=$0
  Header  set Access-Control-Allow-Origin "*"
  Header  set Access-Control-Allow-Credentials "true"
  Header set Access-Control-Max-Age "1000"
  Header set Access-Control-Allow-Headers "X-Requested-With, Content-Type, Origin, Authorization, Accept, Client-Security-Token, Accept-Encoding"
  Header set Access-Control-Allow-Methods "POST"
</LocationMatch>

## ITCM 1733 ##
######



</VirtualHost>



#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#  THIS FILE IS CLOSED FOR ADDING MORE VIRTUAL HOSTS
#
#  PLEASE DO NOT ADD ANY VIRTUAL HOST WITHOUT CHECKING WITH
#  PENG,GANG  gpeng@vmware.com
#
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


